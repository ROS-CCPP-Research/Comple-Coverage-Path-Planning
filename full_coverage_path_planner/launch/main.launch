<launch>
    <arg name="map" default="$(find full_coverage_path_planner)/maps/house02/map.yaml"/>

    <!--    Publish map-->
    <node pkg="map_server" name="grid_server" type="map_server"
          args="$(arg map)"
          respawn="true" clear_params="true" output="screen">
          <param name="frame_id" value="map"/>
    </node>

    <!--    Computes number of agents required from map-->
    <include file="$(find full_coverage_path_planner)/launch/optimizer.launch"/>

    <!--    Compute coverage path from map, divide path for each agent -->
    <include file="$(find full_coverage_path_planner)/launch/path_planner.launch"/>


    <!-- Waits for number of agents and waypoints for each agent, then launches the entire stack for each agent -->

    <node pkg="full_coverage_path_planner" type="multi_robot_bringup.py" name="multi_robot_bringup" clear_params="true"
          required="true" output="screen">
        <param name="robot_namespace" value="robot"/>
    </node>

    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find full_coverage_path_planner)/rviz/main.rviz"/>

</launch>